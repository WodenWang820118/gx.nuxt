import{_ as f}from"./DVSH2alI.js";import{_ as h}from"./DSlk78Em.js";import{f as x,r as c,q as _,g as M,s as d,h as P,o as l,c as m,a as p,F as w,i as y,b as v,m as S,_ as U,j as b,w as k}from"./Dsxbz3Un.js";import{_ as B}from"./Ba36nEMu.js";const C=x("upcoming",()=>{const s=c([]),n=c(!1),t=c(null),o=c({currentPage:1,totalPages:0,totalResults:0,pageSize:10}),u=_(()=>[...s.value].sort((r,e)=>new Date(e.release_date).getTime()-new Date(r.release_date).getTime())),a=_(()=>s.value.length),i=async(r=1)=>{n.value=!0,t.value=null;try{const e=await $fetch("api/movie/upcoming",{params:{page:r.toString()}});e&&(s.value=e.upcomingMovies.results||[],o.value={currentPage:r,totalPages:e.upcomingMovies.total_pages,totalResults:e.upcomingMovies.total_results,pageSize:10})}catch(e){t.value="Failed to fetch upcoming movies",console.error("Error fetching upcoming movies:",e)}finally{n.value=!1}};function g(){s.value=[],t.value=null}return{upcomingMovies:s,isLoading:n,error:t,moviePagination:o,sortedByDate:u,totalMovies:a,fetchUpcomingMovies:i,resetState:g}}),V={class:"mb-12"},z={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},$={class:"mt-8 flex justify-center"},j=M({__name:"UpcomingMovieSection",setup(s){const n=c([]),t=C(),o=c({currentPage:1,totalResults:0,totalPages:0,pageSize:10}),u=async a=>{console.log("Movie Page to:",a),await t.fetchUpcomingMovies(a)};return d(()=>t.upcomingMovies,a=>{n.value=a},{deep:!0}),d(()=>t.moviePagination,a=>{o.value=a},{deep:!0}),P(async()=>{await t.fetchUpcomingMovies(),n.value=t.upcomingMovies}),(a,i)=>{const g=f,r=h;return l(),m("section",V,[i[1]||(i[1]=p("h1",{class:"mb-4 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white"}," Upcoming Movies ",-1)),p("div",z,[(l(!0),m(w,null,y(n.value,e=>(l(),m("div",{key:e.id},[v(g,S({ref_for:!0},e,{item:e}),null,16,["item"])]))),128))]),p("div",$,[v(r,{modelValue:o.value.currentPage,"onUpdate:modelValue":[i[0]||(i[0]=e=>o.value.currentPage=e),u],total:o.value.totalPages,"page-count":o.value.pageSize,ui:{wrapper:"justify-center"},"active-button":{variant:"solid",color:"primary"},"inactive-button":{variant:"outline",color:"gray"},"show-first":"","show-last":""},null,8,["modelValue","total","page-count"])])])}}}),D={};function F(s,n){const t=j,o=B;return l(),b(o,null,{default:k(()=>[v(t)]),_:1})}const T=U(D,[["render",F]]);export{T as default};

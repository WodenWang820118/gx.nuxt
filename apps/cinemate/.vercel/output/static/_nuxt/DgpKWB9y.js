import{_ as p}from"./DVSH2alI.js";import{_ as f}from"./DSlk78Em.js";import{f as P,r as i,q as w,g as y,s as m,h,o as c,c as u,a as _,F as x,i as M,b as d,m as N,_ as S,j as b,w as k}from"./Dsxbz3Un.js";import{_ as C}from"./Ba36nEMu.js";const V=P("now-playing",()=>{const l=i([]),e=i(!1),a=i(null),t=i({currentPage:1,totalPages:0,totalResults:0,pageSize:10}),g=async(s=1)=>{e.value=!0,a.value=null;try{const o=await $fetch("api/movie/now-playing",{params:{page:s.toString()}});o&&(l.value=o.nowPlayingMovies.results,t.value={currentPage:s,totalPages:o.nowPlayingMovies.total_pages,totalResults:o.nowPlayingMovies.total_results,pageSize:10})}catch(o){a.value="Failed to fetch movies",console.error("Error fetching movies:",o)}finally{e.value=!1}},n=w(()=>[...l.value].sort((s,o)=>new Date(o.release_date).getTime()-new Date(s.release_date).getTime()));return{nowPlayingMovies:l,isLoading:e,error:a,moviePagination:t,fetchNowPlayingMovies:g,sortedNowPlayingMovies:n}}),z={class:"mb-12"},B={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},$={class:"mt-8 flex justify-center"},j=y({__name:"NowPlayingSection",setup(l){const e=V(),a=i([]),t=i({currentPage:1,totalResults:0,totalPages:0,pageSize:10}),g=async n=>{console.log("Movie Page to:",n),await e.fetchNowPlayingMovies(n)};return m(()=>e.nowPlayingMovies,n=>{a.value=n},{deep:!0}),m(()=>e.moviePagination,n=>{t.value=n},{deep:!0}),h(async()=>{await e.fetchNowPlayingMovies(),a.value=e.nowPlayingMovies}),(n,s)=>{const o=p,v=f;return c(),u("section",z,[s[1]||(s[1]=_("h1",{class:"mb-4 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white"}," Now Playing Movies ",-1)),_("div",B,[(c(!0),u(x,null,M(a.value,r=>(c(),u("div",{key:r.id},[d(o,N({ref_for:!0},r,{item:r}),null,16,["item"])]))),128))]),_("div",$,[d(v,{modelValue:t.value.currentPage,"onUpdate:modelValue":[s[0]||(s[0]=r=>t.value.currentPage=r),g],total:t.value.totalPages,"page-count":t.value.pageSize,ui:{wrapper:"justify-center"},"active-button":{variant:"solid",color:"primary"},"inactive-button":{variant:"outline",color:"gray"},"show-first":"","show-last":""},null,8,["modelValue","total","page-count"])])])}}}),F={};function R(l,e){const a=j,t=C;return c(),b(t,null,{default:k(()=>[d(a)]),_:1})}const T=S(F,[["render",R]]);export{T as default};
